<link rel="import" href="../uqlibrary-elements/0.5.4/lib/vulcanized.html">

<polymer-element name="uqlibrary-research-metrics" layout center>
    <template>
        <uqlibrary-api-academic-hindex id="api"></uqlibrary-api-academic-hindex>

        <link rel="stylesheet" href="../uqlibrary-elements/resources/theme/element.css">

        <div class="card">
            <paper-shadow z="1">
                <div class="subhead cardSection cardTitle">My metrics</div>

                <div class="text-center text-container hoverable">
                    <span class="espace">105</span>
                    <span class="metric-text">eSpace Publications</span>
                </div>

                <div horizontal layout class="border-top centre" id="wos-stats">

                    <div flex vertical layout center-justified class="type-cites-header hoverable">Web of Science</div>

                    <div center-justified class="border-left type-cites">
                        <div class="metrics-cites">{{hindex.hindex_scopus | zeroIfNone}}</div>
                        <div class="type-cites">h-index</div>
                    </div>

                    <div center-justified class="border-left">
                        <div class="metrics-cites">23</div>
                        <div class="type-cites">Papers</div>
                    </div>

                    <div center-justified class="border-left">
                        <div class="metrics-cites">23</div>
                        <div class="type-cites">Citations</div>
                    </div>

                </div>

                <div horizontal layout class="border-top centre" id="scopus-stats">

                    <div flex vertical layout center-justified class="type-cites-header hoverable">Scopus</div>

                    <div center-justified class="border-left type-cites">
                        <div class="metrics-cites">{{hindex.hindex_scopus | zeroIfNone}}</div>
                        <div class="type-cites">h-index</div>
                    </div>

                    <div center-justified class="border-left">
                        <div class="metrics-cites">23</div>
                        <div class="type-cites">Papers</div>
                    </div>

                    <div center-justified class="border-left">
                        <div class="metrics-cites">23</div>
                        <div class="type-cites">Citations</div>
                    </div>

                </div>

            </paper-shadow>
        </div>

        <div class="card">
            <paper-shadow z="1">
                <div class="subhead cardSection cardTitle">Research guides</div>

                <div class="cardSection">
                    <a href="http://guides.library.uq.edu.au/research_impact/author-identifiers">
                        <core-icon class="link" icon="assignment-ind" aria-label=""></core-icon>
                        Guide to Author Identifiers
                    </a>
                </div>
                <div class="cardSection">
                    <a href="http://guides.library.uq.edu.au/research_impact" target="_blank">
                        <core-icon class="link" icon="trending-up" aria-label=""></core-icon>
                        Guide to Research Output & Impact
                    </a>
                </div>
                <div class="cardSection">
                    <a href="https://www.library.uq.edu.au/research-support" target="_blank">
                        <core-icon class="link" icon="arrow-forward" aria-label=""></core-icon>
                        See all research support
                    </a>
                </div>
            </paper-shadow>
        </div>

    </template>

    <script>
        Polymer('uqlibrary-research-metrics', {

            created: function () {
            },

            userChanged: function (newValue) {

                if (this.user.hasOwnProperty('id')) {
                    this.$.api.get({username: this.user.id});
                }
            },

            ready: function () {
                var that = this;

                this.$.api.addEventListener('uqlibrary-api-academic-hindex-loaded', function (e) {
                    that.hindex = e.detail;
                });
            },

            zeroIfNone: function(value) {
                if (value == null) {
                    return 0;
                } else {
                    return value;
                }
            }

        });
    </script>

</polymer-element>
